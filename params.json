{"name":"Crystaldan.GitHub.io","tagline":"","body":"# Openstack Juno Installation on Fedora 20  #\r\n\r\nThis guide aims to how to install Openstack latest version \"Juno\" on Fedora 20 manually .\r\n\r\n### Three-node Architecture about Openstack\r\nFollowing is the deployment architecture about Openstack:\r\n\r\n ![Openstack Arichitecture](https://geekpics.net/images/2014/12/11/a0qgObt.png)\r\n\r\n### Installation Env Preparation     \r\n\r\n   * Controller Node: 1 processor,2 GB memory,5 GB storage\r\n   * Network Node: 1 processor,512 MB memory,5 GB storage\r\n   * Compute Node: 1 processor,2 GB memory,10 GB storage\r\n   \r\nAbove is a minimal installation of Linux distribution. More resource will be better. All nodes can be deployed on either virtual machine or real machine. This guide based on virtual machine using KVM.\r\n \r\n\r\n### Preparation Before Installation\r\n\r\nHere are some preparations should be done before Juno's installation. It's fairly important for not make these things done will bring unexpected troubles. Following preparations should be performed on all nodes.\r\n\r\n#### 1. Virtual and Network configuration\r\n\r\nYou should config your network on three node according to architecture above.\r\n\r\nNetworks:\r\n\r\n     Net0:\r\n          Name:Net0\r\n          Purpose:Management network\r\n          IP block:10.0.0.0/24\r\n     Net1:\r\n          Name:Net1\r\n          Purpose:Internel Tunnels\r\n          IP block:10.0.1.0/24\r\n     Net2:\r\n          Name:Net2\r\n          Purpose:Externel network\r\n          IP block:\r\n\r\nVirtual machines:\r\n \r\n     VM0:\r\n         Name:controller\r\n         vCPU:4\r\n         Memory:4G\r\n         Disk:20G\r\n         Networks:Net0\r\n     VM1:\r\n         Name:compute\r\n         vCPU:4\r\n         Memory:4G\r\n         Disk:20G\r\n         Networks:Net0,Net1\r\n     VM2:\r\n         Name:network\r\n         vCPU:4\r\n         Memory:4G\r\n         Disk:20G\r\n         Networks:Net0,Net1,Net2\r\n\r\nNetwork config:\r\n\r\n     controller:\r\n         eth0:10.0.0.11  (management network)\r\n         eth1:           (disabled)\r\n         eth2:           (disabled)\r\n         \r\n     network:\r\n         eth0:10.0.0.21  (management network)\r\n         eth1:10.0.1.21  (Internel network)\r\n         eth2:           (Externel network)\r\n         \r\n     compute:\r\n         eth0:10.0.0.31  (management network)\r\n         eth1:10.0.1.31  (Internel network)\r\n         eth2:           (disabled)\r\n\r\n#### 2. Hostname configuration\r\nNot just name your node localhost, named them 'controller'、'network'、'compute'. \r\n\r\nTake controller node as an example:\r\n  \r\n       1. # vi /etc/hostname \r\n         \r\n       2. edit \"controller\"\r\n       \r\n![hostname](https://geekpics.net/images/2014/12/11/hUK14y.png)\r\n          \r\n#### 3. Yum repo configuration\r\nConfig yum repo to get Fedora 20 package.\r\n\r\n        \r\n        1. # cd /etc/yum.repos.d\r\n       \r\n        2. # vi rdo-release.repo \r\n         \r\n        3. Add following content:\r\n           [openstack-juno]\r\n           name=OpenStack Juno Repository\r\n           baseurl=http://repos.fedorapeople.org/repos/openstack/openstack-juno/fedora-20\r\n           enabled=1\r\n           skip_if_unavailable=0\r\n           gpgcheck=1\r\n           gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-RDO-Juno\r\n  \r\n#### 4. Install Openstack packages \r\n  \r\n        1. # yum install yum-plugin-priorities\r\n       \r\n        2. # yum install http://rdo.fedorapeople.org/openstack-juno/rdo-release-juno.rpm\r\n         \r\n        3. # yum upgrade\r\n\r\n#### 5. NTP configuration\r\n\r\nAll node:\r\n  \r\n        1. # yum install ntp\r\n        \r\nController node:\r\n       \r\n        1. # vi /etc/ntp.conf\r\n         \r\n        2. Add following content:\r\n           server 127.127.1.0\r\n\r\nOther node(except controller):\r\n      \r\n        1. # vi /etc/ntp.conf\r\n         \r\n        2. Add following content:\r\n           server 10.0.0.11\r\n           fudge 10.0.0.11 stratum 10 #LCL is unsynchronized\r\n\r\nVerification:  \r\n       \r\n        1. # ntpdate -u 10.0.0.11\r\n        2. # service ntpd restart\r\n        3. # ntpq -p\r\n\r\n#### 6. Firewall configuration\r\nYou should stop firewall service on every node.\r\n\r\n        1. # systemctl stop firewalld.service\r\n        2. # systemctl disable firewalld.service\r\n        \r\nVerification:\r\n\r\n        1. # systemctl status firewalld.service\r\n        \r\nThen you will see following result:\r\n![Firewalld](https://geekpics.net/images/2014/12/11/ZMtY6.png)\r\n\r\n#### 7. Openstack-utils installation\r\n\r\nYou can install openstack-utils. It can help use command to config file.\r\n\r\n        1. # yum install -y openstack-utils\r\n        \r\nYou can run following command to see how to use this tool:\r\n\r\n        1. # openstack-config --help\r\n\r\n### Database Installation\r\nYou should install database in controller node, here is MySQL. Refer to the [Database Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_basic_environment.html#basics-database) step by step.\r\n\r\nVerification:\r\nYou can login in your database by following command:\r\n   \r\n        1. # mysql -u root -p\r\n        \r\n### Messaging Server Installation\r\nServices use a message broker to communicate in OpenStack, so you should install  messaging server on controller node, here is RabbitMQ. Refer to the [RabbitMQ Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_basic_environment.html#basics-messaging-server).\r\n\r\nFollowing are some details you should pay attention during the RabbitMQ installation:\r\n(1) Not use default user 'guest' of RabbitMQ, it's better for you to create a new user and give the user permissions. Take an example to create user with name 'demo' and password 'demo':\r\n\r\n        1. # rabbitmqctl add_user demo demo\r\n        2. # rabbitmqctl set_permissions -p / demo \".*\" \".*\" \".*\" \r\n\r\n (2) RabbitMQ start on IPV6 on default, so you shoud set parameters to config it:\r\n\r\n        1. # vi /etc/rabbitmq/rabbitmq-env.conf\r\n        2. Add following content:\r\n           NODE_IP_ADDRESS=0.0.0.0\r\n           NODE_PORT=5672 \r\n\r\nYou can see following content in /var/log/rabbitmq/rabbit@controller.log if RabbitMQ start normally on IPv4:\r\n\r\n  ![RabbitMQ Start](https://geekpics.net/images/2014/12/11/rh27sotIQe.png)\r\n\r\n### Openstack Service Installation\r\n\r\nAfter operations above, you can install openstack own service now.\r\n\r\n#### 1. Identity service installation & configuration\r\n\r\nOpenstack use Keystone as identity service to verify users and provide other services' API endpoints. You should install and config it on controller node. Refer to the [Keystone Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_keystone.html).\r\n\r\n\r\n* Note: One thing you should notice is that when you grant database access priviledge, you should grant not only localhost and other but also controller.\r\n\r\nTake an example for keystone database:\r\n\r\n       1. MariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY 'KEYSTONE_DBPASS';\r\n       2. MariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'KEYSTONE_DBPASS';\r\n       3. MariaDB [(none)]> GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'controller' IDENTIFIED BY 'KEYSTONE_DBPASS';\r\n      \r\nYou shoule do database priviledge grant like this in every following step.\r\n\r\nYou can verify whether keystone is installed right refer to the verify operation part. And you can login in your database to see what happened.\r\n\r\n#### 2. Image service installtion & configuration\r\n\r\nOpenstack use Glance as image service to discover, register, and retrieve virtual machine images. You should install and config it on controller node. Refer to the [Glance Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_glance.html).\r\n\r\n* Note: For simplicity, this guide describes configuring the Image Service to use the file back end, which uploads and stores in a directory on the controller node hosting the Image Service. By default, this directory is /var/lib/glance/images/.\r\n\r\nAfter you finish successfully, you can see following result:\r\n\r\n ![Glance_api](https://geekpics.net/images/2014/12/11/nX0me.png)\r\n\r\n ![Glance_file](https://geekpics.net/images/2014/12/11/n1WJ875.png)  \r\n\r\n#### 3. Compute service installation & configuration\r\nOpenstack use Nova as compute service to host and manage cloud computing systems. You should install and config it on both controller node and compute node. Refer to [Nova Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_nova.html).\r\n\r\nAfter you finish successfully, you can see following result:\r\n\r\n ![Nova_check_service ](https://geekpics.net/images/2014/12/11/Nr7Oq9.png) \r\n\r\n ![Nova_check_image ](https://geekpics.net/images/2014/12/11/7OwIP.png) \r\n\r\n#### 4. Network service installation & configuration\r\nOpenstack use Neutron as network service to manage all networking facets. You should install and config it on all three node. Refer to [Neutron Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/section_neutron-networking.html).\r\n\r\nAfter you finish successfully, you can see following result:\r\n ![Neutron_check_agent](https://geekpics.net/images/2014/12/11/NOkrRy.png) \r\n#### 5. Initial networks\r\nYou should create the necessary virtual network infrastructure, including the externel network and tenant network. Refer to [Network Initial](http://docs.openstack.org/juno/install-guide/install/yum/content/neutron-initial-networks.html).\r\n\r\nAfter you finish successfully, you can check it by neutron-api:\r\n ![Neutron_api](https://geekpics.net/images/2014/12/11/9E46jlZQK.png)\r\n \r\n ![Neutron_success_result](https://geekpics.net/images/2014/12/11/x9Giorc4.png)\r\n \r\nYou can launch an instance by nova-api:\r\n ![Nova_boot](https://geekpics.net/images/2014/12/11/UkM4A.png) \r\n\r\n\r\n#### 6. Dashboard service install & configuration\r\nOpenstack use Horizon as dashboard service to provide a web interface for users. You should install and config it on controller node. Refer to [Horizon Installation](http://docs.openstack.org/juno/install-guide/install/yum/content/ch_horizon.html).\r\n\r\nAfter you finish successfully, you can access the dashboard using a web browser with url \"http://controller/dashboard\":\r\n\r\n ![Dashboard](https://geekpics.net/images/2014/12/11/Dfdw5qoE.png) \r\n\r\nNote: You should run following command before you open the url.\r\n ![Dashboard_note](https://geekpics.net/images/2014/12/11/rXJ1TaKY.png)\r\n \r\nNow, you have finished all core components' installation work about Openstack!\r\n\r\n\r\n\r\n\r\n     \r\n\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}